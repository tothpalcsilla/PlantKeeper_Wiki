# PlantKeeper
This repo introduces my Android app called PlantKeeper

Minden háztartás büszkélkedhet szobanövényekkel, ám ezeknek gondozása sokszor nem egyszerű feladat. Minél többféle és minél különlegesebb növényeket gyűjtünk össze otthonunkba, annál nehezebb ezek gondozására odafigyelni. Ehhez nyújt segítséget a **PlantKeeper** alkalmazás, mely lehetővé teszi növényeink katalogizálását, figyelmeztet, ha eljött az öntözés/tápoldatozás ideje, és fotók tárolását teszi lehetővé növényeinkről. 
A végeredmény ennek az alkalmazásnak a megtervezése és megvalósítása Android platformon. Az alkalmazás részét képezi a szerver oldali kommunikáció, mely a felhasználók kezelésén kívük biztosítja számukra, hogy megoszthassák egymással növényeiket, azoknak igényeit. Így a család minden tagja saját okostelefonján követheti nyomon a háztartás összes növényének igényeit és naprakészen láthatják, mely feladatok vannak még hátra a növényeket illetően.

##  A rendszer indítása
### Splash képernyő  
Az adatok betöltésének idejére láthatóvá válik az alábbi ábrán is látható splash képernyő, mely egy egyszerű, az alkalmazás ikonját tartalmazó képernyő.  
![splash](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.1%20Splash.png)
### Regisztráció  
Az alkalmazás elindításakor a splash képernyő után először megjelenő felületen lehetőség adódik a regisztrációra. Ehhez egy email címet és egy megfelelő jelszót kell megadni, majd a Regisztrálj most! gombra kattintva elküldeni ezeket a szerver felé. Ekkor az email cím és a generált azonosító mind az autentikáció, mind az adatbázis részben mentésre kerül. Sikeres regisztráció után a rendszer rögtön bejelentkezik és a Növények listája képernyőre, ellenkező esetben Toast üzenetben kiírja, hogy miért nem volt sikeres a regisztráció.
### Bejelentkezés  
A már regisztrált emaillel rendelkező felhasználók a bejelentkező kezdőképernyőn megadva email címüket és a hozzá tartozó jelszót, bejelentkezhetnek a rendszerbe.  Amennyiben az adott készüléken már történt belépés, amit nem követett kijelentkezés, az eszköz automatikusan belép a bejelentkezett felhasználóval, és a Növények listája felület kerül betöltésre indítás után.  
![login1](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.2.PNG)  
### Elfelejtett jelszó  
A fentebb bemutatott felületen lehetőség van az elfelejtett jelszó probléma orvoslására is.  Az Elfelejtetted a jelszavad? gombra kattintva új felület jelenik meg, ahonnan a  beépített Vissza gombbal lehetséges visszatérni a bejelentkező felületre.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.3.PNG)  
Itt lehet megadni a beregisztrált email címet, és rákattintani a Jelszó visszaállítása gombra, hogy új jelszó beállítását igényelhesse a felhasználó.

Az email elküldése előtt a szoftver ellenőrzi a megadott címet, és amennyiben létezik ilyen a rendszerben, elküldi az emailt a megadott címre és visszatér a bejelentkező felületre. Ellenkező esetben hibaüzenet érkezik. A felhasználó email fiókjába érkező levélben szerepel egy link, melyen keresztül új jelszót adhat meg, ami a Mentés gomb lenyomásával mentésre kerül a Firebase Authentication-be. Ezután a felhasználó az újonnan megadott jelszóval jelentkezhet be az alkalmazásba.
### Profil szerkesztése  
A menüből a Profil szerkesztése opciót választva egy olyan felület jelenik meg, ahol a felhasználók saját bejelentkezési jelszavukat manipulálhatják. Lehetőség nyílik új jelszót beállítani, illetve jelszó visszaállítást igényelni az Elfelejtett jelszó fejezetben leírtakhoz hasonlóan, az email cím megadásával. Sikeres jelszóváltoztatás után a rendszer kijelentkezik és a regisztrációs felületre lép. A jelszó módosításán kívül lehetőség van kijelentkezni az alkalmazásból. a Kijelentkezés gombbal.
### Kijelentkezés  
A Növények listájának menüjéből a Kijelentkezés opciót választva lehet kilépni az adott felhasználó növényei közül. Ezzel a rendszer a bejelentkező képernyőre irányítja a felhasználót. Kijelentkezéskor az eszközön beállított riasztások elvetésre kerülnek, ezzel biztosítva, hogy egy eszközön akár több felhasználó is követhesse növényeinek hogylétét anélkül, hogy egy másik felhasználó riasztásait is megkapja. Ha kijelentkezés után kilépnek az alkalmazásból, az nem fog riasztani, amíg újra be nem jelentkezik valaki a rendszerbe az eszközön.  
![logout](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.5.png)  
## Növények listája felület  
### Növények listája  
Az alkalmazás fő képernyője a virágokat listázó felület. Itt egy görgethető listában nézheti végig a felhasználó az összes általa felvett, vagy vele megosztott növényt. A növényeket fajtájuk szerinti ABC sorrendben jelenítem meg, így az azonos fajtájú virágok egy helyen fognak szerepelni a felsorolásban.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.6.PNG)  
A képernyő jobb felső sarkában található menü ikonra kattintva előugrik a menü elemeket tartalmazó lista. Innen  érhető el a kijelentkezés funkción kívül a riasztások kikapcsolásának lehetősége és az összes növény törlése opció is. 
Az alsó lebegő akciógomb segítségével lehet új növényeket létrehozni, és új gondozót rendelni az összes növényhez. 
A listaelemeken hosszan kattintva a felugró menüből elérhető a növény szerkesztésének és törlésének lehetősége, valamint az adott növény megosztását is innen lehet kezdeményezni.
### Új növény hozzáadása  
A Növények listájában a jobb alsó sarokban található lebegő akciógomb segítségével lehet az új növény létrehozását kezdeményezni.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.7_6.8.PNG)  
A kinyitott gombból az Új növény létrehozása opciót kell ehhez választani. Ekkor egy felugró ablakban kérem el a felhasználótól a készíteni kívánt növény adatait, azaz a fajtáját és a nevét, valamint lehetőséget adok egy komment mező kitöltésére is egyéb információk feljegyzésére. A Mentés gombbal a növényt eltárolom az online adatbázisban. A Mégse gombbal, vagy a felugró ablak mellé történő kattintással elvethetem az eddigi változtatásokat.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.9.PNG)  
### Növény manipulációja  
A Növények listájában egy elemen hosszan kattintva előjön annak menüje, melynek segítségével a felhasználó manipulálhatja a virág adatait.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.10.PNG)  
#### Növény szerkesztése  
A növény szerkesztése az első a menüelemek közül. Ez megegyezik a növény létrehozásánál látott felugró ablakkal, de ilyenkor már nem üresen jelenik meg, hanem a növény jelenlegi adataival kitöltve. Ezt módosítva, majd a Mentés gombra kattintva az adatbázisba is bekerülnek az új adatok.
#### Növény(ek) törlése  
A növény törlésére három féle lehetőség is adódik. Ebből kettő található meg a növény menüjében. Ha a felhasználó csak egy növényt akar törölni, akkor innen kell választania. Mivel egy növénynek több tulajdonosa is lehet, így az egyik törlési lehetőség a Törlés saját növények közül, mely a növényt nem az adatbázisból, csak az adott felhasználó növényei közül tünteti el. Ám ilyenkor is végleges a törlés, amennyiben az adott felhasználó volt az utolsó gondozója a növénynek, de erről külön figyelmeztetést kap (Te vagy az utolsó gondozója ennek a növénynek. Biztosan véglegesen törölni akarod?). Ha a menüből a Végleges törlést választjuk, a növény eltávolításra kerül az adatbázisból, és így miden gondozójától is, amennyiben a biztonsági kérdést itt is megerősíti a felhasználó. A harmadik lehetőség a Minden növény törlése, amit a lista menüjéből lehet kiválasztani. Ekkor a bejelentkezett felhasználó összes növényét törlöm az adatbázisból.
### Új gondozó (mindnek)  
Az Új gondozó opcióval az adott növénynek új tulajdonost adhat meg a felhasználó. Ha minden növényünket meg szeretnénk osztani valakivel, azt az új növény készítésével egy helyen, a lebegő akciógomb menüjéből az Új gondozó mindnek opciót választva tehetjük meg.
Az új gondozó hozzáadásának a menete: elkérem a bejelentkezett felhasználótól annak a másik beregisztrált gondozónak az email címét, akivel közösen szeretné ápolni az adott virágot. Először ellenőrzöm, hogy a megadott email cím szerepel-e a rendszerben. Amennyiben nem, egy üzenetben jelzem, hogy nincs ilyen felhasználó. Ha viszont szerepel az adatbázisban, akkor ellenőrzöm, hogy az adott növény nem rendelkezik-e még ezzel a felhasználóval. Ha már szerepel a gondozók között, akkor egy üzenetben szólok, hogy „Ez a növény már rendelkezik ezzel a gondozóval”. Ellenkező esetben a növényhez sikeresen hozzáadtam az új felhasználót, még nem véglegesített gondozóként.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.11.PNG)  
### Új megosztott növény  
Ha egy felhasználóval az előző alfejezetben leírt módon valaki megoszt egy növényt, az nem kerül automatikusan a gondozott növényei közé, hanem minden megosztani kívánt növényről külön értesítő jön a Növények listája felületen. Itt egy felugró ablakban megjelenik, hogy ki és milyen növényt akar megosztani a bejelentkezett féllel. Amennyiben a növény rendelkezik profilképpel, akkor azt a rendszer letölti az eszközre és a felugró ablakban az adatai mellett ezt a képet is megjeleníti.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.12.PNG)  
A felhasználónak lehetősége van eldönteni, hogy a virágot elfogadja-e. A Megerősítés gombbal felveszi a növényt a sajátjai közé és magát, mint véglegesített gondozót menti a növény adatai közé. Ekkor a növény többi képe is letöltésre kerül az eszközre, hogy később onnan töltődjenek be. 
Az Elutasítás gombbal törli magát a növény gondozói listájából és a rendszer többet nem kérdez rá az adott megosztott növényre. Ekkor az eszközről törlődik a letöltött profilkép.
## Növény részletei felület  
### Növény részletei  
A Növények listájából egy elemre kattintva megnyílik a Növények részletei felület. Itt láthatóak a virág létrehozásakor megadott adatai (faj, név, komment), valamint a növény fényképei és profilképe is. Ezen a felületen az adatok módosítására nincs lehetőség, csak a fényképek és a riasztások manipulálhatók innen. A listára a bal felső sarokban található nyíllal lehet visszalépni.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.13.PNG)  
Minden virághoz fényképeket készíthetünk, és ezek egy mini galériában, a helyet mindig véletlenszerűen felosztva jelennek meg a képernyő felső részében. Ez a galéria össze is zárható, hogy könnyebb legyen a keresés a riasztási listában. Ezt egyszerűen a felület felfelé görgetésével lehet megtenni. A növény profilképének beállított fotó az adatoktól balra, külön is látható. Ez az a kép, ami a Növények listájában is megjelenik a virág neve és fajtája mellett.
### Új kép  
A képernyő felső harmadában található akciógomb biztosít lehetőséget egy növényhez új képet hozzárendelni. Kétféleképpen lehet új fotót adni a virághoz: lehetőség van új fényképet készíteni, vagy pedig választani a már meglévő képek közül egyet. 
Amennyiben az Új kép készítése opciót választja a felhasználó, megnyílik egy kameraalkalmazás, aminek segítségével aktuális képet készíthet a virágról. Az így elkészült kép egy előnézetben jelenik meg, ahol a kész képről lehet dönteni. Ha jól sikerült, az OK gombbal lehet elmenteni és visszatérni a Növény részletei képernyőre, ha nem, akkor az Újra gombbal lehet újabb képet készíteni.
A Kép választása opció lehetővé teszi meglévő fénykép választását az eszköz galériájából. A megfelelő képet kijelölve a felhasználó visszatér az alkalmazásba.
Bármelyik lehetőséget is választja a felhasználó, az elkészített/kiválasztott kép bekerül a növény adataitól balra található fénykép helyére. A rendszer megkérdezi a felhasználótól, hogy profilképként is szeretné-e beállítani ezt a fotót. Amennyiben erre Igen a válasz, ez a kép fog megjelenni a Növények listája és a Növény részletei felületen is a profilkép helyén, ellenkező esetben a kép csak a többi fotóval együtt a virág minigalériájában jelenik majd meg.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.14_6.15_6.16.PNG)  
### Riasztások és feladatok listája  
A növény adatai és képei alatti részben a növényhez tartozó riasztásokat és feladatokat lehet látni. Ha még nincs riasztás a növényhez, akkor csak a Riasztások fejléc jelenik meg, és a lista üres marad, amíg új riasztást nem hoznak létre a Riasztás részletei részben leírt módon. Amennyiben már vannak riasztásaink és hozzájuk tartozó feladataink, akkor az elemek kötött sorrendben jelennek meg. Először a Feladatok fejléc, majd a feladatok időrendi sorrendben, ezt követi a Riasztások fejléc és végül a riasztások az időpontjuk alapján sorba rendezve.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.17.PNG)  
A Riasztások lista tartalmazza az összes, a növényhez létrehozott riasztást. Ezek mindegyike lehet aktív és inaktív. Az inaktív riasztásoknak nincsenek hozzárendelt feladataik, és ezáltal beállított jelzéseik sem, ellentétben az aktív riasztásokkal, melyek mindkettővel rendelkeznek. A lista fejlécében eldönthetjük, hogy milyen típusú elemekre szeretnénk szűrni. A Mind az összes típust, az Aktívak csak a bekapcsolt, az Inaktívak csak a kikapcsolt riasztásokat sorakoztatják fel. 
Minden listaelem tartalmaz egy ikont, ami a jelzés típusát hivatott szimbolizálni (Öntözés, Metszés, Tápanyag-utánpótlás, Egyéb), a jelzés beállított időpontját (óra: perc formátumban), a jelzés nevét és az ismétlődési gyakoriságát leíró szöveget, valamint egy kapcsoló gombot, melyen ki és bekapcsolható a riasztás aktivitása.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.18.PNG)  
A fent említett módon a listában lehetőség van riasztásokat aktívvá, vagy inaktívvá tenni, de ezen kívül a listaelemre hosszan kattintva felugró menü segítségével szerkeszthetjük és törölhetjük is a riasztásokat. Szerkeszteni ezen kívül a listaelemre történő kattintással is lehet. Mindkét esetben a Riasztás részletei alfejezetben bemutatott felület jelenik meg, a riasztás jelenlegi adataival kitöltve.
A Feladatok lista a növényhez kapcsolódó teendőket gyűjti időrendi sorrendbe. A listaelemek a riasztáshoz hasonló módon épülnek fel. Itt is egy ikon jelzi a feladat típusát, majd a feladat keltezését és az időpontját egy kapcsoló gomb követi. A gombon is megjelenik a feladat típusa. Amíg nincs bekapcsolva, addig a teendő még megvalósításra vár, ám amint valaki bekapcsolja, az azt jelenti, hogy a munkát elvégezték. Minden jövőbeli listaelem színe fehér. Ha már lejárt, de nem végezték el a feladatot, akkor vörös, ha pedig akár lejárt, akár jövőbeli, de a felhasználó készre állítja, akkor zöld lesz. A lista fejlécében be lehet állítani a megjelenítendő feladatok időintervallumát (1 nap, 1 hét, 2 hét, 1 hónap, 1 év).  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.19.PNG)  
## Riasztás részletei felület  
A Növény részletei felület alján található lebegő akciógomb megnyomásával új felület jelenik meg, ahol riasztást lehet létrehozni.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.20.PNG)  
A Riasztás részletei képernyő fejlécében lehet beállítani, hogy a létrehozáskor aktív, vagy inaktív legyen-e a jelzés (alapértelmezetten ki van kapcsolva a kapcsoló gomb). Lejjebb a jelzés neve írható be és a típusa választható ki egy legördülő listából (Öntözés, Metszés, Tápanyag-utánpótlás, Egyéb). A riasztás nevét főleg az Egyéb típusú jelzéseknél célszerű megadni, jelezve, hogy mi is a tényleges feladat. Ezt egy időpontválasztó követi, amin egy 24 órás formátumú órán lehet kiválasztani a jelzési időt.
Az Ismétlés gomb megnyomásával egy felugró ablakban lehetőség van kiválasztani a riasztás ismétlődését meghatározó paramétereket. Elsőként az ismétlés kapcsoló gombját kell aktiválni. Majd azt kell eldönteni, hogy óránként, naponta, hetente, havonta, vagy évente szóljon a jelzés, majd azt, hogy hány óránként/naponként/… tegye ezt. Ezen felül a heti ismétlődésnél kiválasztható, hogy a hét mely napjain, a havi ismétlődésnél pedig, hogy a hónap ugyanazon dátum napján (pl.: 1.-jén, 22.-én stb.), vagy hogy ugyanazon napján (a hónap első szombatján / harmadik vasárnapján stb.) jelezzen. Minden gyakoriság mellé megadható, hogy meddig tartson az ismétlődés (örökre, egy bizonyos dátumig, vagy csak valahányszor történjen meg).  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.21.PNG)  
A Mentés gombbal elmentésre kerülnek a megadott adatok, és a rendszer kikalkulálja, hogy mi lesz a riasztás kezdőidőpontja. Amennyiben a felhasználó egyszeri riasztást hoz létre, és az időpont megelőzi a létrehozás időpontját, akkor egy nappal később lesz a megadott időpontban a jelzés. Ha az időpont a jelenleginél későbbi, még ma jelezni fog a rendszer. Ismétlődő riasztásoknál a múltbeli jelzéseket is létrehozza a rendszer és lejárt munkaként megjeleníti a Feladatok listájában.
### Riasztások ki/bekapcsolása  
A Riasztás részletei felület fejlécében és a Riasztások és feladatok listája fejezetben bemutatott listaelemeken található kapcsoló gomb segítségével a riasztások ki és bekapcsolhatók. Ám ha a felhasználó a riasztások feladatait nem szeretné törölni, csak valamiért nem akarja, hogy az eszköz jelezzen a feladat elérkezésekor, akkor az összes jelzést ki és bekapcsolhatja a Növények listája felület menüjéből a Riasztások ki opcióval. Amennyiben a menüben a Riasztások be lehetőség szerepel, az azt jelenti, hogy jelenleg a jelzések ki vannak kapcsolva és innen lehet bekapcsolni őket, ekkor a felirat újra Riasztások ki lesz.
## Riasztás  
Ha az eszközön van bejelentkezett felhasználó, aki rendelkezik olyan leszinkronizált növénnyel, aminek van aktív jövőbeli riasztása beállítva, és a felhasználó nem kapcsolta ki a jelzéseket az eszközön, akkor a beállított időpontban jelezni fog a telefon.
A riasztás hangjelzéssel és rezgéssel ébreszti fel az eszközt, ha az alvó állapotban van is. A felhasználó a jelzésre kétféleképpen reagálhat. Ha nem alkalmas az időpont, választhatja a Szundi opciót, amely beállítja a riasztást egy későbbi időpontra (Szundi opció 42.oldal), vagy választhatja a Megcsinálom opciót, mely megnyitja a riasztás tulajdonos növényének adatlapját, ahol a feladatlistából a felhasználó készre állíthatja a munkát, ha ténylegesen elvégezte. Ha a Megcsinálom opció után mégsem készül el a feladat, a riasztás nem fog újból jelezni, de a lejárt feladat vörösen meg fog jelenni a munkák között és így a felhasználó észre fogja venni a növény adatait megnyitva, hogy elmaradt egy feladattal. Ha egy jelzés két felhasználónál is jelez, és az egyikük elvégzi a feladatot, a másik viszont szundira állítja azt, de belép a Növények listája felületre, mielőtt a késleltetett riasztás bekövetkezne, az elhalasztott jelzés elvetésre kerül az eszközön, hiszen már elvégezték azt.  
![](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/6.22.PNG)  
A riasztás megjeleníti az alkalmazás nevét, a jelzési időpontot, a növény nevét és a jelzés típusát, valamint a két gombot, amivel leállítható a jelzés.
## Navigáció a képernyők között  
A felhasználói felület fő komponensei között általában listaelemekre kattintással, a Home gombbal, a vissza nyíllal, a Mentés és a Mégse gombokkal lehet navigálni, de a pontos képet az alábbi ábra szemlélteti.  
![Felhasznaloi_felulet_navigacio](https://github.com/tothpalcsilla/PlantKeeper_Wiki/blob/main/PlantKeeper_images/Felhaszn%C3%A1l%C3%B3i%20fel%C3%BCletek.png)
